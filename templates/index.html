<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PyChain</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              void: '#050508',
              surface: '#0a0a0f',
              elevated: '#12121a',
            },
            fontFamily: {
              sans: ['Inter', 'system-ui', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            }
          }
        }
      }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
      * { box-sizing: border-box; }

      body {
        background: #050508;
        min-height: 100vh;
      }

      /* Animated gradient orb behind balance */
      .balance-glow {
        position: absolute;
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, rgba(34, 197, 94, 0.15) 0%, transparent 70%);
        filter: blur(60px);
        animation: pulse-glow 4s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes pulse-glow {
        0%, 100% { opacity: 0.5; transform: scale(1); }
        50% { opacity: 0.8; transform: scale(1.1); }
      }

      /* Balance number animation */
      .balance-value {
        background: linear-gradient(135deg, #22c55e 0%, #4ade80 50%, #22c55e 100%);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: gradient-shift 3s ease infinite;
      }

      @keyframes gradient-shift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      /* Action buttons */
      .action-btn {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .action-btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
        transform: translateX(-100%);
        transition: transform 0.5s ease;
      }

      .action-btn:hover::before {
        transform: translateX(100%);
      }

      .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 40px -10px currentColor;
      }

      .action-btn:active {
        transform: translateY(0);
      }

      /* Mine button special effect */
      .mine-btn {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        box-shadow: 0 0 30px rgba(245, 158, 11, 0.3);
      }

      .mine-btn:hover {
        box-shadow: 0 0 50px rgba(245, 158, 11, 0.5);
      }

      .mine-btn.mining {
        animation: mining-pulse 0.5s ease-in-out infinite;
      }

      @keyframes mining-pulse {
        0%, 100% { box-shadow: 0 0 30px rgba(245, 158, 11, 0.3); }
        50% { box-shadow: 0 0 60px rgba(245, 158, 11, 0.6); }
      }

      /* Send button */
      .send-btn {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
      }

      .send-btn:hover {
        box-shadow: 0 0 50px rgba(99, 102, 241, 0.5);
      }

      /* Terminal styling */
      .terminal {
        background: #0a0a0f;
        border: 1px solid #1f1f2e;
        font-family: 'JetBrains Mono', monospace;
      }

      .terminal-header {
        background: #12121a;
        border-bottom: 1px solid #1f1f2e;
      }

      .terminal-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      /* Hash text styling */
      .hash-valid { color: #22c55e; }
      .hash-invalid { color: #64748b; }
      .hash-prefix { color: #f59e0b; font-weight: 600; }

      /* Pending transaction pulse */
      .pending-dot {
        width: 8px;
        height: 8px;
        background: #f59e0b;
        border-radius: 50%;
        animation: pending-pulse 2s ease-in-out infinite;
      }

      @keyframes pending-pulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(0.8); }
      }

      /* Blockchain section */
      .chain-container {
        background: linear-gradient(180deg, transparent 0%, rgba(99, 102, 241, 0.03) 100%);
      }

      /* Block card enhancements */
      .block-card {
        animation: block-appear 0.4s ease-out forwards;
        opacity: 0;
      }

      @keyframes block-appear {
        from { opacity: 0; transform: translateX(20px); }
        to { opacity: 1; transform: translateX(0); }
      }

      .chain-link {
        animation: block-appear 0.3s ease-out forwards;
        opacity: 0;
      }

      .new-block-highlight {
        animation: new-block-glow 0.8s ease-out 3;
      }

      @keyframes new-block-glow {
        0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
        70% { box-shadow: 0 0 0 15px rgba(34, 197, 94, 0); }
        100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar { width: 6px; height: 6px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb { background: #2a2a3e; border-radius: 3px; }
      ::-webkit-scrollbar-thumb:hover { background: #3a3a4e; }

      /* Input styling */
      .input-minimal {
        background: transparent;
        border: none;
        border-bottom: 2px solid #2a2a3e;
        transition: border-color 0.3s ease;
        outline: none;
      }

      .input-minimal:focus {
        border-color: #6366f1;
      }

      .input-minimal::placeholder {
        color: #4a4a5e;
      }

      /* Section labels */
      .section-label {
        font-size: 11px;
        font-weight: 600;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: #4a4a5e;
      }

      /* Floating elements */
      .float-subtle {
        animation: float-subtle 6s ease-in-out infinite;
      }

      @keyframes float-subtle {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      /* Toast */
      .toast {
        backdrop-filter: blur(10px);
      }

      /* Modal overlay */
      .modal-overlay {
        background: rgba(5, 5, 8, 0.9);
        backdrop-filter: blur(4px);
      }

      /* Zero state glow */
      .zero-glow {
        background: radial-gradient(circle, rgba(245, 158, 11, 0.1) 0%, transparent 70%);
      }

      /* Net Worth Widget - chat widget entrance */
      .net-worth-widget {
        animation: widget-bounce-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s both;
      }

      @keyframes widget-bounce-in {
        0% {
          opacity: 0;
          transform: scale(0.8) translateY(20px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script defer src="/static/js/main.js"></script>
  </head>

  <body class="font-sans text-white antialiased">
    <!-- Main Container -->
    <div class="min-h-screen flex flex-col">

      <!-- Header - Minimal -->
      <header class="px-6 py-4 flex items-center justify-between border-b border-white/5">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
            <span class="text-sm font-bold">‚óà</span>
          </div>
          <span class="text-lg font-semibold tracking-tight">PyChain</span>
        </div>
        <a href="/logout" class="text-sm text-zinc-500 hover:text-white transition-colors">
          Logout
        </a>
      </header>

      <!-- Main Content -->
      <main class="flex-1 px-6 py-12 max-w-6xl mx-auto w-full">

        <!-- Hero: Blockchain -->
        <section class="relative flex flex-col items-center justify-center py-8 mb-12">
          <!-- Zero balance hint -->
          <div id="zeroBalanceHint" class="hidden mb-6 text-center">
            <p class="text-amber-400 text-sm font-medium">No coins yet? Mine your first block below</p>
          </div>

          <!-- The Blockchain -->
          <div class="w-full">
            <div class="flex items-center justify-center gap-3 mb-6">
              <span id="blockCount" class="text-xs text-zinc-500">(0 blocks)</span>
            </div>

            <div class="relative">
              <div id="blockchainScroll" class="flex items-center gap-0 overflow-x-auto pb-4 scroll-smooth">
                <div id="blockchainList" class="flex items-center gap-0 mx-auto">
                  <p class="text-zinc-600 px-4">Loading...</p>
                </div>
              </div>

              <!-- Scroll buttons -->
              <button id="scrollLeft" class="absolute left-0 top-1/2 -translate-y-1/2 w-10 h-10 bg-elevated hover:bg-white/10 text-white rounded-full flex items-center justify-center transition-all opacity-0 pointer-events-none z-10 border border-white/10">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
              </button>
              <button id="scrollRight" class="absolute right-0 top-1/2 -translate-y-1/2 w-10 h-10 bg-elevated hover:bg-white/10 text-white rounded-full flex items-center justify-center transition-all opacity-0 pointer-events-none z-10 border border-white/10">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
              </button>
            </div>
          </div>
        </section>

        <!-- Actions: Mine & Send -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-20">

          <!-- Mine Card -->
          <div class="relative group h-full">
            <div class="absolute -inset-1 bg-gradient-to-r from-amber-500/20 to-orange-500/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative bg-elevated rounded-2xl p-8 border border-white/5 h-full flex flex-col">
              <div class="flex items-start justify-between mb-6">
                <div>
                  <h2 class="text-xl font-semibold mb-1">Mine Block</h2>
                  <p class="text-zinc-500 text-sm">Earn <span class="text-amber-400 font-medium">10 coins</span> per block</p>
                </div>
                <div class="text-4xl">‚õèÔ∏è</div>
              </div>
              <div class="flex-1"></div>
              <button id="mineButton" class="action-btn mine-btn w-full py-4 rounded-xl text-black font-bold text-lg">
                Start Mining
              </button>
            </div>
          </div>

          <!-- Send Card -->
          <div class="relative group h-full">
            <div class="absolute -inset-1 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative bg-elevated rounded-2xl p-8 border border-white/5 h-full flex flex-col">
              <div class="flex items-start justify-between mb-6">
                <div>
                  <h2 class="text-xl font-semibold mb-1">Send Coins</h2>
                  <p class="text-zinc-500 text-sm">Transfer to any wallet</p>
                </div>
                <div class="text-4xl">üí∏</div>
              </div>
              <form id="transactionForm" class="flex-1 flex flex-col">
                <div class="flex gap-4 mb-4">
                  <input
                    type="text"
                    id="recipient"
                    placeholder="Recipient"
                    required
                    class="input-minimal flex-1 py-2 text-white"
                  />
                  <input
                    type="number"
                    id="amount"
                    placeholder="Amount"
                    step="0.01"
                    required
                    class="input-minimal w-24 py-2 text-white text-right"
                  />
                </div>
                <div class="flex-1"></div>
                <button type="submit" class="action-btn send-btn w-full py-4 rounded-xl text-white font-bold text-lg">
                  Send
                </button>
              </form>
            </div>
          </div>
        </section>

        <!-- Pending Transactions -->
        <section class="mb-20">
          <div class="flex items-center gap-3 mb-6">
            <h2 class="section-label">Pending Transactions</h2>
            <span id="pendingCount" class="text-xs text-zinc-600">(0)</span>
          </div>
          <div id="transactionsList" class="space-y-3">
            <p class="text-zinc-600 text-sm">No pending transactions</p>
          </div>
        </section>

        <!-- Block Inspector - Terminal Style -->
        <section class="mb-12">
          <div class="flex items-center gap-3 mb-6">
            <h2 class="section-label">Block Inspector</h2>
          </div>

          <div class="terminal rounded-xl overflow-hidden">
            <!-- Terminal header -->
            <div class="terminal-header px-4 py-3 flex items-center gap-3">
              <div class="flex gap-2">
                <div class="terminal-dot bg-red-500/80"></div>
                <div class="terminal-dot bg-yellow-500/80"></div>
                <div class="terminal-dot bg-green-500/80"></div>
              </div>
              <div class="flex-1 flex items-center gap-2">
                <span class="text-zinc-600 text-xs">block-inspector</span>
                <select id="blockSelector" class="bg-transparent text-zinc-400 text-xs border-none outline-none cursor-pointer">
                  <option value="">-- select block --</option>
                </select>
              </div>
            </div>

            <!-- Terminal content -->
            <div class="p-6 space-y-6 min-h-[300px]">
              <div id="terminalContent">
                <p class="text-zinc-600">
                  <span class="text-green-500">$</span> select a block to inspect...
                </p>
              </div>

              <!-- PoW Attempts -->
              <div id="powSection" class="hidden">
                <p class="text-zinc-500 mb-3">
                  <span class="text-green-500">$</span> mining_attempts <span class="text-zinc-600">--verbose</span>
                </p>
                <div id="powAttempts" class="space-y-1 pl-4 border-l-2 border-zinc-800">
                  <!-- Attempts will be inserted here -->
                </div>
              </div>

              <!-- Block Data -->
              <div id="blockDataSection" class="hidden">
                <p class="text-zinc-500 mb-3">
                  <span class="text-green-500">$</span> block_data <span class="text-zinc-600">--format json</span>
                </p>
                <pre id="blockData" class="text-xs text-zinc-400 overflow-auto max-h-40 pl-4 border-l-2 border-zinc-800"></pre>
              </div>

              <!-- Hash -->
              <div id="hashSection" class="hidden">
                <p class="text-zinc-500 mb-3">
                  <span class="text-green-500">$</span> sha256sum
                </p>
                <p id="blockHash" class="font-mono text-sm text-green-400 pl-4 border-l-2 border-zinc-800 break-all"></p>
              </div>
            </div>
          </div>
        </section>

      </main>

      <!-- Footer -->
      <footer class="px-6 py-4 border-t border-white/5 text-center">
        <p class="text-xs text-zinc-600">
          PyChain Demo ‚Ä¢ Educational Blockchain
        </p>
      </footer>

    </div>

    <!-- Toast -->
    <div id="toast" class="toast fixed bottom-36 right-6 px-5 py-3 rounded-xl transform translate-y-[200%] transition-transform duration-300 z-50"></div>

    <!-- Floating Net Worth Widget (like an annoying chat widget) -->
    <div class="net-worth-widget fixed bottom-6 right-6 z-30 group">
      <!-- The widget -->
      <div class="bg-elevated border border-white/10 rounded-2xl shadow-2xl shadow-black/50 p-4 min-w-[200px] transition-all duration-300 hover:scale-105 hover:shadow-green-500/20">
        <!-- Header -->
        <div class="flex items-center gap-2 mb-3 pb-2 border-b border-white/5">
          <div class="w-6 h-6 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
            <span class="text-xs font-bold">‚óà</span>
          </div>
          <span class="text-xs font-medium text-zinc-400">Net Worth</span>
          <div class="ml-auto w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
        </div>
        <!-- Balance -->
        <div class="flex items-baseline gap-2">
          <span id="balance" class="text-3xl font-black text-green-400">0.00</span>
          <span class="text-xs text-zinc-500">coins</span>
        </div>
        <!-- User -->
        <div class="mt-2 pt-2 border-t border-white/5">
          <p class="text-xs text-zinc-600">{{ username }}'s wallet</p>
        </div>
      </div>
      <!-- Speech bubble notch -->
      <div class="absolute -bottom-2 right-6 w-4 h-4 bg-elevated border-r border-b border-white/10 transform rotate-45"></div>
    </div>

    <!-- Mining Overlay (appears during mining) -->
    <div id="miningOverlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-40 hidden">
      <div class="text-center">
        <div class="text-6xl mb-4 animate-bounce">‚õèÔ∏è</div>
        <p class="text-xl font-semibold text-amber-400">Mining in progress...</p>
        <p class="text-zinc-500 text-sm mt-2">Finding valid proof of work</p>
        <div id="miningHashes" class="mt-6 font-mono text-xs text-zinc-600 h-20 overflow-hidden">
          <!-- Fake hash animation will go here -->
        </div>
      </div>
    </div>

  </body>
</html>
